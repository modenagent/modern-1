!function(e){e.fn.smartWizard=function(t){var n=e.extend({},e.fn.smartWizard.defaults,t),a=arguments;return this.each(function(){function s(){var t=y.children("div");y.children("ul").addClass("anchor"),t.addClass("content"),u=e("<div>Loading</div>").addClass("loader"),v=e("<div></div>").addClass("actionBar"),b=e("<div></div>").addClass("stepContainer"),m=e("<a>"+n.labelNext+"</a>").attr("href","#").addClass("buttonNext"),C=e("<a>"+n.labelPrevious+"</a>").attr("href","#").addClass("buttonPrevious"),g=e("<a>"+n.labelFinish+"</a>").attr("href","javascript:void(0);").addClass("buttonFinish btn-checkout"),sp=e("<div id='report-type'></div>").attr("style","float:left;padding:10px;"),n.errorSteps&&0<n.errorSteps.length&&e.each(n.errorSteps,function(e,t){h(t,!0)}),b.append(t),v.append(u),v.append(sp),y.append(b),y.append(v),n.includeFinishButton&&v.append(g),v.append(m).append(C),L=b.width(),e(m).click(function(){return e(this).hasClass("buttonDisabled")?!1:(d(),!1)}),e(C).click(function(){return e(this).hasClass("buttonDisabled")?!1:(c(),!1)}),e(g).click(function(){if(!e(this).hasClass("buttonDisabled"))if(e.isFunction(n.onFinish))n.onFinish.call(this,e(S));else{var t=y.parents("form");t&&t.length&&t.submit()}return!1}),e(S).bind("click",function(e){return S.index(this)==x?!1:(e=S.index(this),1==S.eq(e).attr("isDone")-0&&i(e),!1)}),n.keyNavigation&&e(document).keyup(function(e){39==e.which?d():37==e.which&&c()}),r(),i(x)}function r(){n.enableAllSteps?(e(S,y).removeClass("selected").removeClass("disabled").addClass("done"),e(S,y).attr("isDone",1)):(e(S,y).removeClass("selected").removeClass("done").addClass("disabled"),e(S,y).attr("isDone",0)),e(S,y).each(function(t){e(e(this).attr("href"),y).hide(),e(this).attr("rel",t+1)})}function i(t){var a=S.eq(t),s=n.contentURL,r=a.data("hasContent");stepNum=t+1,s&&0<s.length?n.contentCache&&r?l(t):e.ajax({url:s,type:"POST",data:{step_number:stepNum},dataType:"text",beforeSend:function(){u.show()},error:function(){u.hide()},success:function(n){u.hide(),n&&0<n.length&&(a.data("hasContent",!0),e(e(a,y).attr("href"),y).html(n),l(t))}}):l(t)}function l(t){var a=S.eq(t),s=S.eq(x);if(t!=x&&e.isFunction(n.onLeaveStep)&&!n.onLeaveStep.call(this,e(s)))return!1;if(n.updateHeight&&b.height(e(e(a,y).attr("href"),y).outerHeight()),"slide"==n.transitionEffect)e(e(s,y).attr("href"),y).slideUp("fast",function(n){e(e(a,y).attr("href"),y).slideDown("fast"),x=t,o(s,a)});else if("fade"==n.transitionEffect)e(e(s,y).attr("href"),y).fadeOut("fast",function(n){e(e(a,y).attr("href"),y).fadeIn("fast"),x=t,o(s,a)});else if("slideleft"==n.transitionEffect){var r=0;t>x?(nextElmLeft1=L+10,nextElmLeft2=0,r=0-e(e(s,y).attr("href"),y).outerWidth()):(nextElmLeft1=0-e(e(a,y).attr("href"),y).outerWidth()+20,nextElmLeft2=0,r=10+e(e(s,y).attr("href"),y).outerWidth()),t==x?(nextElmLeft1=e(e(a,y).attr("href"),y).outerWidth()+20,nextElmLeft2=0,r=0-e(e(s,y).attr("href"),y).outerWidth()):e(e(s,y).attr("href"),y).animate({left:r},"fast",function(t){e(e(s,y).attr("href"),y).hide()}),e(e(a,y).attr("href"),y).css("left",nextElmLeft1),e(e(a,y).attr("href"),y).show(),e(e(a,y).attr("href"),y).animate({left:nextElmLeft2},"fast",function(e){x=t,o(s,a)})}else e(e(s,y).attr("href"),y).hide(),e(e(a,y).attr("href"),y).show(),x=t,o(s,a);return!0}function o(t,a){return e(t,y).removeClass("selected"),e(t,y).addClass("done"),e(a,y).removeClass("disabled"),e(a,y).removeClass("done"),e(a,y).addClass("selected"),e(a,y).attr("isDone",1),n.cycleSteps||(0>=x?e(C).addClass("buttonDisabled"):e(C).removeClass("buttonDisabled"),S.length-1<=x?e(m).addClass("buttonDisabled"):e(m).removeClass("buttonDisabled")),!S.hasClass("disabled")||n.enableFinishButton?e(g).removeClass("buttonDisabled"):e(g).addClass("buttonDisabled"),e.isFunction(n.onShowStep)&&!n.onShowStep.call(this,e(a))?!1:void 0}function d(){var e=x+1;if(S.length<=e){if(!n.cycleSteps)return!1;e=0}i(e)}function c(){var e=x-1;if(0>e){if(!n.cycleSteps)return!1;e=S.length-1}i(e)}function f(t){e(".content",p).html(t),p.show()}function h(t,n){n?e(S.eq(t-1),y).addClass("error"):e(S.eq(t-1),y).removeClass("error")}var u,p,v,b,m,C,g,y=e(this),x=n.selected,S=e("ul > li > a[href^='#step-']",y),L=0;if(v=e(".actionBar",y),0==v.length&&(v=e("<div></div>").addClass("actionBar")),p=e(".msgBox",y),0==p.length&&(p=e('<div class="msgBox"><div class="content"></div><a href="#" class="close">X</a></div>'),v.append(p)),e(".close",p).click(function(){return p.fadeOut("normal"),!1}),t&&"init"!==t&&"object"!=typeof t){if("showMessage"===t){var w=Array.prototype.slice.call(a,1);return f(w[0]),!0}if("seller"===t){var D=document.getElementById("report-type");return D.innerHTML="<span class='toptext2'>Sellers Presentation</span>",!0}if("buyer"===t){var D=document.getElementById("report-type");return D.innerHTML="<span class='toptext'>Buyers Presentation</span>",!0}if("marketUpdate"===t){var D=document.getElementById("report-type");return D.innerHTML="<span class='toptext'>Market Update</span>",!0}if("registry"===t){var D=document.getElementById("report-type");return D.innerHTML="<span class='toptext'>Smart Registry</span>",!0}if("setError"===t)return w=Array.prototype.slice.call(a,1),h(w[0].stepnum,w[0].iserror),!0;e.error("Method "+t+" does not exist")}else s()})},e.fn.smartWizard.defaults={selected:0,keyNavigation:!0,enableAllSteps:!1,updateHeight:!0,transitionEffect:"fade",contentURL:null,contentCache:!0,cycleSteps:!1,includeFinishButton:!1,enableFinishButton:!1,errorSteps:[],labelNext:"<i class='icon-long-arrow-right'></i>",labelPrevious:"<i class='icon-long-arrow-left'></i>",labelFinish:"Checkout & Download",onLeaveStep:null,onShowStep:null,onFinish:!1}}(jQuery);